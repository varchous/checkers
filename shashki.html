<!DOCTYPE html>
<html>
<html>
<head>
	<link rel="stylesheet"   href="CSS.css"  type="text/css">
	<link rel="shortcut icon" href="icon.jpg" type="image/png">
	<meta charset="utf8">
	<title></title>
</head>
<body>
<table>	
	<tr>	
    		<td id='00' ><img src=""></td>
    		<td id='01' onClick='inf(this)'><img src="w.png"></td>
    		<td id='02' ><img src=""></td>
    		<td id='03' onClick='inf(this)'><img src="w.png"></td>
    		<td id='04' ><img src=""></td>
    		<td id='05' onClick='inf(this)'><img src="w.png"></td>
    		<td id='06' ><img src=""></td>
    		<td id='07' onClick='inf(this)'><img src="w.png"></td>
	</tr>
	<tr>	
    		<td id='10' onClick='inf(this)'><img src="w.png"></td>
    		<td id='11'><img src=""></td>
    		<td id='12' onClick='inf(this)'><img src="w.png"></td>
    		<td id='13'><img src=""></td>
    		<td id='14' onClick='inf(this)'><img src="w.png"></td>
    		<td id='15'><img src=""></td>
    		<td id='16' onClick='inf(this)'><img src="w.png"></td>
    		<td id='17'><img src=""></td>
	</tr>
	<tr>	
    		<td id='20'><img src=""></td>
    		<td id='21' onClick='inf(this)'><img src="w.png"></td>
    		<td id='22'><img src=""></td>
    		<td id='23' onClick='inf(this)'><img src="w.png"></td>
    		<td id='24'><img src=""></td>
    		<td id='25' onClick='inf(this)'><img src="w.png"></td>
    		<td id='26'><img src=""></td>
    		<td id='27' onClick='inf(this)'><img src="w.png"></td>
	</tr>
	<tr>	
    		<td id='30' onClick='inf(this)'><img src=""></td>
    		<td id='31'><img src=""></td>
    		<td id='32' onClick='inf(this)'><img src=""></td>
    		<td id='33'><img src=""></td>
    		<td id='34' onClick='inf(this)'><img src=""></td>
    		<td id='35'><img src=""></td>
    		<td id='36' onClick='inf(this)'><img src=""></td>
    		<td id='37'><img src=""></td>
	</tr>
	<tr>	
    		<td id='40'><img src=""></td>
    		<td id='41' onClick='inf(this)'><img src=""></td>
    		<td id='42'><img src=""></td>
    		<td id='43' onClick='inf(this)'><img src=""></td>
    		<td id='44'><img src=""></td>
    		<td id='45' onClick='inf(this)'><img src=""></td>
    		<td id='46'><img src=""></td>
    		<td id='47' onClick='inf(this)'><img src=""></td>
	</tr>	
	<tr>	
    		<td id='50' onClick='inf(this)'><img src="b.png"></td>
    		<td id='51'><img src=""></td>
    		<td id='52' onClick='inf(this)'><img src="b.png"></td>
    		<td id='53'><img src=""></td>
    		<td id='54' onClick='inf(this)'><img src="b.png"></td>
    		<td id='55'><img src=""></td>
    		<td id='56' onClick='inf(this)'><img src="b.png"></td>
    		<td id='57'><img src=""></td>
	</tr>
	<tr>	
    		<td id='60'><img src=""></td>
    		<td id='61' onClick='inf(this)'><img src="b.png"></td>
    		<td id='62'><img src=""></td>
    		<td id='63' onClick='inf(this)'><img src="b.png"></td>
    		<td id='64'><img src=""></td>
    		<td id='65' onClick='inf(this)'><img src="b.png"></td>
    		<td id='66'><img src=""></td>
    		<td id='67' onClick='inf(this)'><img src="b.png"></td>
	</tr>
	<tr>	
    		<td id='70' onClick='inf(this)'><img src="b.png"></td>
    		<td id='71'><img src=""></td>
    		<td id='72' onClick='inf(this)'><img src="b.png"></td>
    		<td id='73'><img src=""></td>
    		<td id='74' onClick='inf(this)'><img src="b.png"></td>
    		<td id='75'><img src=""></td>
    		<td id='76' onClick='inf(this)'><img src="b.png"></td>
    		<td id='77'><img src=""></td>
	</tr>
</table>
<script type="text/javascript">
	var mas=[
	["00","01","02","03","04","05","06","07"],

	["10","11","12","13","14","15","16","17"],

	["20","21","22","23","24","25","26","27"],

	["30","31","32","33","34","35","36","37"],

	["40","41","42","43","44","45","46","47"],

	["50","51","52","53","54","55","56","57"],

	["60","61","62","63","64","65","66","67"],

	["70","71","72","73","74","75","76","77"] 
	]
	var kw=12, kb=12;
	var f5;
	var x1,y1,x2,y2,x3,y3;
	for (var i=0;i<=7;i++)
		{
			for (var j = 0;j<=7;j++)
			{	if((i+j)%2==1)
				document.getElementById(mas[i][j]).className = 'cl1';
				else document.getElementById(mas[i][j]).className = 'cl2';
			};
		};
	var turn=1;
	var flag=0;
	var ff=0;
	function inf(element)
		{	var ap=prov();
			//alert(turn);
			//if (prov()==1) { alert("Надо бить");}
			if(kw==0) {alert("Победа черный"); return;}
			if(kb==0) {alert("Победа белых"); return;}
			x2=x1;
			y2=y1;
			x1=element.id/10| 0;
			y1=element.id%10;
			//return element.id;
			//alert("(" + x1 + " " + y1 + ")" + " " + "(" + x2 + " " + y2 + ")");
			var z1=document.getElementById(mas[x1][y1]);
			var q1=z1.firstChild;
			if( (q1.getAttribute('src')=='w1.png'||q1.getAttribute('src')=='w.png') && turn==1 || (q1.getAttribute('src')=='b.png' ||q1.getAttribute('src')=='b1.png') && turn==0 )document.getElementById(mas[x1][y1]).className='cl3';
			var z2=document.getElementById(mas[x2][y2]);
			var q2=z2.firstChild;
			if(x1+y2%2==0 || x2+y2%2==0) return;
			 x3=(x1+x2)/2|0;
			 y3=(y1+y2)/2|0; 
			var e=document.getElementById(mas[x3][y3]);
			var q3=e.firstChild;
			/*if(x2>x1&&y2>y1) {ff=1;}
			if(x2>x1&&y2<y1) {ff=2};
			if(x2<x1&&y2<y1) {ff=4};
			if(x2<x1&&y2>y1) {ff=3};
			alert(ff);	*/
			if(q2.getAttribute('src')=='w.png' && q1.getAttribute('src')=="" && turn==1 && (x1-x2)==1 && Math.abs(y1-y2)==1 && ap==2 ||
			 q2.getAttribute('src')=='w.png' && q1.getAttribute('src')=="" && turn==1 && Math.abs(x1-x2)==2 && Math.abs(y1-y2)==2 && q3.getAttribute('src')=='b.png' && ap==1 ||
			  turn==1 && q2.getAttribute('src')=='w1.png' && q1.getAttribute('src')=="" && Math.abs(x1-x2)==2 &&Math.abs(y1-y2)==2 && ap==1 ||
			  q2.getAttribute('src')=='w1.png' && q1.getAttribute('src')=="" && turn==1 && Math.abs(x1-x2)==1 && Math.abs(y1-y2)==1 && ap==2 
			   )
			{
				if (ff==1)
				document.getElementById(mas[x1][y1]).className='cl1';
				document.getElementById(mas[x2][y2]).className='cl1';
				q1.setAttribute('src','w.png');
				if(q2.getAttribute('src')=='w1.png') q1.setAttribute('src','w1.png');
				q2.setAttribute('src','');
				ap=0;
				if(q3.getAttribute('src')=='b.png')
				{q3.setAttribute('src',''); kb--;ap=prov();if (prov()==1) {document.getElementById(mas[x1][y1]).className='cl3'; return;}}
				turn=0;	
				if(x1==7){q1.setAttribute('src','w1.png');}
				return;
			}

			if(q2.getAttribute('src')=='b.png' && q1.getAttribute('src')=="" && turn==0  && (x2-x1)==1 && Math.abs(y1-y2)==1 && ap==2||
				q2.getAttribute('src')=='b.png' && q1.getAttribute('src')=="" && turn==0  && Math.abs(x2-x1)==2 && Math.abs(y1-y2)==2 && q3.getAttribute('src')=='w.png' && ap==1||
				 turn==0 && q2.getAttribute('src')=='b1.png' && q1.getAttribute('src')=="" && Math.abs(x1-x2)==2 &&Math.abs(y1-y2)==2 && ap==1||
				 q2.getAttribute('src')=='b1.png' && q1.getAttribute('src')=="" && turn==0 && Math.abs(x1-x2)==1 && Math.abs(y1-y2)==1 && ap==2  
				 )
			{
				document.getElementById(mas[x1][y1]).className='cl1';
				document.getElementById(mas[x2][y2]).className='cl1';
				q1.setAttribute('src','b.png');
				if(q2.getAttribute('src')=='b1.png') q1.setAttribute('src','b1.png');
				q2.setAttribute('src','');
				ap=0;
				if(q3.getAttribute('src')=='w.png')
				{
				q3.setAttribute('src',''); kw--; ap=prov();if (prov()==1) {document.getElementById(mas[x1][y1]).className='cl3'; return;}	
				}
				turn=1;
				if(x1==0){q1.setAttribute('src','b1.png');}
				return;	
			}

			document.getElementById(mas[x2][y2]).className='cl1';
		}
function prov(ap)
{
	var r=document.getElementsByTagName('img');
	var kol,kol1,kol2,kol3,kol4,kol5,kol6,kol7,kol8;
	for(kol=0;kol<64;kol++)
	{
		var l1=0;
		var h1=kol/8|0,h2=kol%8;

		if((h1+h2)%2==1)
		{var h3=h1-1,h4=h2-1,h5=h1-2,h6=h2-2,h7=h1+1,h8=h2+1,h9=h1+2,h10=h2+2;	
		if(h3>=0 && h3<=7 && h4>=0 && h4<=7 && h5>=0 && h5<=7 && h6>=0 && h6<=7 && turn==1 && (r[(h1*8)+h2].getAttribute('src')=='w.png' || r[(h1*8)+h2].getAttribute('src')=='w1.png') && (r[(h3*8)+h4].getAttribute('src')=='b.png' || r[(h3*8)+h4].getAttribute('src')=='b1.png' ) && r[(h5*8)+h6].getAttribute('src')=='' )
			{l1=1; return 1;}
		if(h3>=0 && h3<=7 && h8>=0 &&h8<=7 && h5>=0 && h5<=7 && h10>=0 && h10<=7 && turn==1 && (r[(h1*8)+h2].getAttribute('src')=='w.png' ||r[(h1*8)+h2].getAttribute('src')=='w1.png')&& r[(h3*8)+h8].getAttribute('src')=='b.png' && r[(h5*8)+h10].getAttribute('src')=='')
			{li=1; return 1;}
		if(h7>=0 && h7<=7 && h4>=0 && h4<=7 && h9>=0 && h9<=7 && h6>=0 && h6<=7 && turn==1 && (r[(h1*8)+h2].getAttribute('src')=='w.png' || r[(h1*8)+h2].getAttribute('src')=='w1.png'  )&& (r[(h7*8)+h4].getAttribute('src')=='b.png'||r[(h7*8)+h4].getAttribute('src')=='b1.png' )&& r[(h9*8)+h6].getAttribute('src')=='')
		{li=1; return 1;}
		if(h7>=0 && h7<=7 && h8>=0 && h8<=7 && h9 >=0 && h9<=7 && h10>=0 && h10<=7 && turn==1 && (r[(h1*8)+h2].getAttribute('src')=='w.png' || r[(h1*8)+h2].getAttribute('src')=='w1.png')  && ( r[(h7*8)+h8].getAttribute('src')=='b.png' || r[(h7*8)+h8].getAttribute('src')=='b1.png') && r[(h9*8)+h10].getAttribute('src')=='')
			{li=1; return 1;}



		if(h3>=0 && h3<=7 && h4>=0 && h4<=7 && h5>=0 && h5<=7 && h6>=0 && h6<=7 && turn==0 && (r[(h1*8)+h2].getAttribute('src')=='b.png'||r[(h1*8)+h2].getAttribute('src')=='b1.png') && (r[(h3*8)+h4].getAttribute('src')=='w.png'||r[(h3*8)+h4].getAttribute('src')=='w1.png') && r[(h5*8)+h6].getAttribute('src')=='')
			{l1=1; return 1;}

		if(h3>=0 && h3<=7 && h8>=0 &&h8<=7 && h5>=0 && h5<=7 && h10>=0 && h10<=7 && turn==0 && (r[(h1*8)+h2].getAttribute('src')=='b.png'||r[(h1*8)+h2].getAttribute('src')=='b1.png') && (r[(h3*8)+h8].getAttribute('src')=='w.png' ||r[(h3*8)+h8].getAttribute('src')=='w1.png')&& r[(h5*8)+h10].getAttribute('src')=='')
			{li=1; return 1;}

		if(h7>=0 && h7<=7 && h4>=0 && h4<=7 && h9>=0 && h9<=7 && h6>=0 && h6<=7 && turn==0 && (r[(h1*8)+h2].getAttribute('src')=='b.png'||r[(h1*8)+h2].getAttribute('src')=='b1.png') && (r[(h7*8)+h4].getAttribute('src')=='w.png'||r[(h7*8)+h4].getAttribute('src')=='w1.png') && r[(h9*8)+h6].getAttribute('src')=='')
			{li=1; return 1;}

		if(h7>=0 && h7<=7 && h8>=0 && h8<=7 && h9 >=0 && h9<=7 && h10>=0 && h10<=7 && turn==0 && (r[(h1*8)+h2].getAttribute('src')=='b.png'||r[(h1*8)+h2].getAttribute('src')=='b1.png') && (r[(h7*8)+h8].getAttribute('src')=='w.png'||r[(h7*8)+h8].getAttribute('src')=='w1.png') && r[(h9*8)+h10].getAttribute('src')=='')
			{li=1; return 1;}

		//if(h7>=0 && h)	 
		/*else alert(h1 + " " + h2);*/
		}
		if (l1==1) {break; return 1;}

		/*
		if(kol-9>0 && kol-9<=63)
		if(kol>=17){kol1=kol-9;kol2=kol+9;kol3=kol-7;kol4=kol+7;}
		else{{kol1=kol;kol2=kol;kol3=kol;kol4=kol;}
		if(kol<=46){kol5=kol-18;kol6=kol+18;kol7=kol-14;kol8=kol+14;}
		else{kol5=kol;kol6=kol;kol7=kol;kol8=kol;}
		alert(r[kol8].getAttribute('src'));
		alert("2");
		if(   r[kol1].getAttribute('src')=='b.png' && r[kol5].getAttribute('src')==''  
		   || r[kol2].getAttribute('src')=='b.png' && r[kol6].getAttribute('src')=='' 
		   || r[kol3].getAttribute('src')=='b.png' && r[kol7].getAttribute('src')=='' 
		   || r[kol4].getAttribute('src')=='b.png' && r[kol8].getAttribute('src')==''  
		   )
			{l1=1; /*alert("25"); *//*}*/
		/*else alert("25-2");
		alert("3");
		if(turn==1 && getAttribute('src')=='w.png' && l1==1)
		{
			alert("Надо бить");
		}
		else alert("бить не надо");
	
		*/
	}
	//alert(kol/2);
	//r[0].setAttribute('src','b.png');
	return 2;
}
</script>
</body>
</html>